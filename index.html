<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landing Page Updates</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {
            packages: ['table']
        });
google.charts.setOnLoadCallback(drawTable);

function drawTable() {
    var queryString = encodeURIComponent('SELECT *');  // ดึงข้อมูลทั้งหมดจากทุกคอลัมน์
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1xRqnFHRWL3l_-6-LNJ_LM5Bejiv0aV5JwcV9PtzC-Nk/gviz/tq?sheet=Sheet1&tq=' + queryString);

    query.send(function(response) {
        if (response.isError()) {
            console.log('Error: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            document.getElementById('table_div').innerHTML = 'Failed to load data. Please check the console for errors.';
            return;
        }

        var data = response.getDataTable();
        var table = new google.visualization.Table(document.getElementById('table_div'));

        // เปลี่ยนรูปแบบการแสดงผลของคอลัมน์ที่มี <br> เพื่อให้แสดงผลบรรทัดใหม่
        var formattedData = new google.visualization.DataTable();
        formattedData.addColumn('string', 'Ticket ID');
        formattedData.addColumn('string', 'Bug/Feature Description');
        
        for (var i = 0; i < data.getNumberOfRows(); i++) {
            var row = [];
            row.push(data.getValue(i, 0));  // Ticket ID
            row.push(data.getValue(i, 1).replace(/<br>/g, '<br>'));  // แทนที่ <br> ด้วยบรรทัดใหม่
            formattedData.addRow(row);
        }

        table.draw(formattedData, {showRowNumber: false, width: '100%', height: '100%'});
    });
}

    </script>
</head>
<body>
    <h1>อัพเดทโปรแกรมประจำวัน</h1>
    <div id="table_div">Loading data...</div>
</body>
</html>
